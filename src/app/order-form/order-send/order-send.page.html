<ion-header>
    <ion-toolbar color="primary">
        <ion-buttons slot="primary">
            <ion-button icon-only (click)="dismiss()">
                <ion-icon name="close"></ion-icon>
            </ion-button>
        </ion-buttons>
        <ion-title>{{translate.instant('Bestellungen')}}</ion-title>
    </ion-toolbar>
</ion-header>

<ion-content>
  <ion-grid>
      <!-- Row 1 Ziel -->
      <ion-row>
          <ion-col size="12">
              <ion-item>
                <ion-label position="floating">{{translate.instant('Ziel')}}</ion-label>
                  <ion-select (ionChange)="changeAim()"
                              name="Ziel_DropDown"
                              id="Ziel_DropDown"
                              value="Ziel_DropDown"
                              okText="{{translate.instant('okay')}}"
                              cancelText="{{translate.instant('dismiss')}}">
                    <ion-select-option value="0" [selected]="Ziel_DropDown==0" >{{translate.instant('Bitte auswählen')}}</ion-select-option>
                    <ion-select-option value="1">Brugg Lifting</ion-select-option>
                    <ion-select-option value="2">{{translate.instant('Mein Einkauf')}}</ion-select-option>
                  </ion-select>
              </ion-item>
          </ion-col>
      </ion-row>

      <div *ngIf="Ziel_DropDown==1">
        <ion-row>
          <ion-col size="12" size-md="6">
            <h4>{{translate.instant('Rechnungsadresse')}}</h4>
            <ion-item>
                <ion-label position="floating">{{translate.instant('Kundennummer')}}</ion-label>
                <ion-input
                          type="text"
                          name="RE_Kundennummer"
                          id="RE_Kundennummer"
                          [(ngModel)]="RE_Kundennummer">
                </ion-input>
            </ion-item>
          </ion-col>
          <ion-col size="12" size-md="6">
              <h4>{{translate.instant('Lieferadresse')}}</h4>
              <ion-item>
                <ion-label position="floating">&nbsp;</ion-label>
                <ion-select
                            name=""
                            id=""
                            [(ngModel)]="LA_DropDown">
                    <ion-select-option value="0" ng-selected="LA_DropDown==0" >{{translate.instant('Identisch mit Rechnungsadresse')}}</ion-select-option>
                    <ion-select-option value="1" ng-selected="LA_DropDown==1" >{{translate.instant('Abweichende Lieferaddresse')}}</ion-select-option>
                    <ion-select-option value="2" ng-selected="LA_DropDown==2" *ngIf="latitude" >{{translate.instant('Jetziger Standort')}}</ion-select-option>
                </ion-select>
              </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12" size-md="6">
            <ion-item>
              <ion-label position="floating">{{translate.instant('Firma')}}</ion-label>
              <ion-input
                          type="text"
                          name="RE_Firma"
                          id="RE_Firma"
                          [(ngModel)]="RE_Firma">
              </ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12" size-md="6">
            <ion-item>
              <ion-label position="floating">{{translate.instant('E-Mail')}}</ion-label>
              <ion-input
                          type="text"
                          name="RE_Email"
                          id="RE_Email"
                          [(ngModel)]="RE_Email">
              </ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12" size-md="6">
            <ion-item>
                <ion-label position="floating">{{translate.instant('Strasse')}}</ion-label>
                <ion-input
                            type="text"
                            name="RE_Str"
                            id="RE_Str"
                            [(ngModel)]="RE_Str">
                </ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col size="12" size-md="6">
            <ion-item>
              <ion-label position="floating">{{translate.instant('PLZ')}}</ion-label>
              <ion-input
                          type="text"
                          name="RE_PLZ_ORT"
                          id="RE_PLZ_ORT"
                          [(ngModel)]="RE_PLZ_ORT">
              </ion-input>
            </ion-item>
          </ion-col>
        </ion-row>
      </div>
      <div *ngIf="Ziel_DropDown==2">
          <ion-row>
            <ion-col size="12">
              <ion-item>
                <ion-label position="floating">{{translate.instant('Ansprechpartner')}}</ion-label>
                  <ion-select (ionChange)="changeReAnsp()"
                              name="RE_Ansp"
                              id="RE_Ansp"
                              value="RE_Ansp"
                              okText="{{translate.instant('okay')}}"
                              cancelText="{{translate.instant('dismiss')}}">
                    <!-- TODO -->
                    <!-- <ion-option [value]="{{ansp.eMail}}" *ngFor="let ansp of aktiverAnsprechpartnerListe">{{ansp.Vorname}} {{ansp.Name}}</ion-option> -->
                  </ion-select>
                </ion-item>
            </ion-col>
          </ion-row>
      </div>
        
      <br><br>

      <ion-row>
        <ion-col size="12" size-md="6">
            <ion-item>
              <ion-label position="floating">{{translate.instant('Betreff')}}</ion-label>
              <ion-input
                         type="text"
                         name="Betreff"
                         id="Betreff"
                         [(ngModel)]="Betreff">
              </ion-input>
            </ion-item>
        </ion-col>
        <ion-col size="12" size-md="6">
          <ion-item>
            <ion-label position="floating">{{translate.instant('Empfänger')}}</ion-label>
            <ion-input
                        type="text"
                        name="Empfaenger"
                        id="Empfaenger"
                        [(ngModel)]="Empfaenger">
            </ion-input>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12" size-md="6" offset-md="6">
            <ion-item>
              <ion-label position="floating">{{translate.instant('Cc')}}</ion-label>
              <ion-input
                         type="text"
                         name="Copy"
                         id="Copy"
                         [(ngModel)]="Copy">
              </ion-input>
            </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12">
            <ion-item>
              <ion-label position="floating">{{translate.instant('Notiz')}}</ion-label>
                <ion-textarea
                              rows="4"
                              type="text"
                              name="Notiz"
                              id="Notiz"
                              [(ngModel)]="Notiz">
                </ion-textarea>
            </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12" size-md="6">
            <ion-item>
              <ion-label position="floating">{{translate.instant('Datum')}}</ion-label>
              <ion-datetime
                            [(ngModel)]="bestDatum"
                            id="bestDatum"
                            required="true"
                            displayFormat="DD.MM.YYYY"
                            max = {{maxDate}}
                            doneText="{{translate.instant('okay')}}"
                            cancelText="{{translate.instant('dismiss')}}">
              </ion-datetime>
            </ion-item>
        </ion-col>
        <ion-col size="12" size-md="6">
          <ion-item>
            <ion-label position="floating">{{translate.instant('Termin')}}</ion-label>
            <ion-datetime
                          [(ngModel)]="bestTermin"
                          id="bestTermin"
                          required="true"
                          displayFormat="DD.MM.YYYY"
                          max = {{maxDate}}
                          doneText="{{translate.instant('okay')}}"
                          cancelText="{{translate.instant('dismiss')}}">
            </ion-datetime>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="12" size-md="6">
            <h4>{{translate.instant('Bestellungen')}}</h4>
            <ion-item>
                <ion-label >{{translate.instant('ID-Nummer beibehalten')}} ({{translate.instant('nein')}} / {{translate.instant('ja')}})</ion-label>
                <ion-toggle [(ngModel)]="beibehaltenID" checked="false"></ion-toggle>
            </ion-item>
        </ion-col>
      </ion-row>
  </ion-grid>


  <div class="modal-footer">
      <ion-button type="button" class="btn btn-modal-danger footerIcon" (click)="dismiss()">
          <ion-icon name="close"></ion-icon>
      </ion-button>
      <ion-button type="button" [disabled]="Empfaenger==''" class="btn btn-modal-success footerIcon" (click)="send();">
          <ion-icon name="checkmark"></ion-icon>
      </ion-button>
  </div>
</ion-content>
