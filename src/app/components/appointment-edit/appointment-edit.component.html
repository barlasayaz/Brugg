<ion-header>
  <ion-toolbar color="primary">
      <ion-buttons slot="primary">
          <ion-button icon-only (click)="dismiss()">
              <ion-icon name="close"></ion-icon>
          </ion-button>
      </ion-buttons>
      <ion-title>{{modalTitle}}</ion-title>
  </ion-toolbar>
</ion-header>	


<ion-content>
  <ion-grid>
    <!-- Row 1 -->
    <ion-row>
        <ion-col size-xl="8" size-lg="8" size-md="8" size-sm="12" size="12">
            <ion-item>  
                <ion-label position="floating">{{translate.instant('Kunden')}}</ion-label>
                <ionic-selectable item-content 
                                  [ngClass]="{required:fehler}" 
                                  [(ngModel)]="customer"
                                  [(items)]="listCustomer"
                                  itemValueField="id"
                                  itemTextField="company"
                                  [canSearch]="true"
                                  (onChange)="customerChange($event)"
                                  [disabled] = customerDisabled>
                </ionic-selectable> 
            </ion-item>
          </ion-col>      

        <!-- Terminart -->
        <ion-col size-xl="4" size-lg="4" size-md="4" size-sm="12" size="12">
          <ion-item>  
              <ion-label position="floating">{{translate.instant('Terminart')}}</ion-label>
              <ion-select [ngClass]="{required:fehler}" 
                          [(ngModel)]="activAppointment.appointment_type"                        
                          okText="{{translate.instant('okay')}}" 
                          cancelText="{{translate.instant('dismiss')}}"
                          >
                <ion-select-option value="0" selected>{{translate.instant('Kundenbesuch')}}</ion-select-option>
                <ion-select-option value="1">{{translate.instant('Prüfung')}}</ion-select-option>
                <ion-select-option value="2">{{translate.instant('Urlaub')}}</ion-select-option>
              </ion-select> 
          </ion-item>
        </ion-col>       
    </ion-row>
    <!-- Row 2 -->
    <ion-row>
      <ion-col size-xl="4" size-lg="4" size-md="4" size-sm="12" size="12">
        <ion-item>
            <ion-label position="floating">{{translate.instant('Datum')}}</ion-label>
            <ion-datetime [ngClass]="{required:inputError}" 
                          [(ngModel)]="activAppointment.appointment_date"
                          displayFormat="DD.MM.YYYY"
                          max = {{maxDate}}
                          doneText="{{translate.instant('okay')}}"
                          cancelText="{{translate.instant('dismiss')}}">
            </ion-datetime>
        </ion-item>
      </ion-col>  
      <ion-col size-xl="4" size-lg="4" size-md="4" size-sm="12" size="12" *ngIf="activAppointment.appointment_type<2">
        <!-- FAHRT -->
        <ion-item>
          <ion-label position="floating">{{translate.instant('Startzeit')}}</ion-label>
          <ion-datetime 
                        [ngClass]="{required:fehler}"
                        type="time"
                        id="start_time"
                        [(ngModel)]="activAppointment.start_time"
                        name="start_time" 
                        required="true"
                        displayFormat="HH:mm"
                        doneText="{{translate.instant('okay')}}" 
                        cancelText="{{translate.instant('dismiss')}}">
          </ion-datetime>  
        </ion-item>
      </ion-col>
      <ion-col size-xl="4" size-lg="4" size-md="4" size-sm="12" size="12" *ngIf="activAppointment.appointment_type<2">
        <!-- UHRZEIT -->
        <ion-item>
          <ion-label position="floating">{{translate.instant('Endzeit')}}</ion-label>
          <ion-datetime 
                        [ngClass]="{required:fehler}"
                        type="time"
                        id="end_time"
                        [(ngModel)]="activAppointment.end_time"
                        name="end_time" 
                        required="true"
                        displayFormat="HH:mm"
                        doneText="{{translate.instant('okay')}}" 
                        cancelText="{{translate.instant('dismiss')}}">
          </ion-datetime>  
        </ion-item>
      </ion-col>
      </ion-row>      
    <!-- Row 3 -->
    <ion-row>
      <ion-col size-xl="12" size-lg="12" size-md="12" size-sm="12" size="12">
        <ion-item>
            <ion-label position="floating">{{translate.instant('Notes')}}</ion-label>            
            <ion-textarea type="text" 
                          rows="5" 
                          id="Notiztext" 
                          [ngClass]="{required:inputError}"
                          [(ngModel)]="activAppointment.notes">
            </ion-textarea>
        </ion-item>
      </ion-col>      
    </ion-row>       

    <!-- Error -->
    <div [hidden]="inputError" class="fehler">
      <div>
          &nbsp;
      </div>
    </div>
    <div [hidden]="!inputError" class="pfehler" style="margin-top: 15px; margin-left: 5px;">
      <div class="highlightFehler">
        {{translate.instant('Bitte füllen Sie alle Pflichtfelder aus.')}}
      </div>
    </div>

  </ion-grid>

  <!-- Footer -->
  <div class="modal-footer">
    <ion-button *ngIf="!itsNew" class="btn btn-modal-danger btn-del" (click)="appointmentDeactivate();">
      <ion-icon name="trash"></ion-icon>
    </ion-button>
    <ion-button class="btn btn-modal-danger" (click)="dismiss()">
      <ion-icon name="close"></ion-icon>
    </ion-button>
    <ion-button class="btn btn-modal-success" (click)="appointmentEdit();">
      <ion-icon name="checkmark"></ion-icon>
    </ion-button>
  </div>
</ion-content>