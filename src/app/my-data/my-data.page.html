<main-nav aktivPage="MyData"></main-nav>

<div class="ek-content" style="overflow: scroll;">
	<div class="container container-fix">
		<div class="mt20 content-sm">
			<div class="settings-delete">
			<ion-grid>
				<ion-row>
					<ion-col size-xl="7" size-lg="7" size-md="7" size-sm="6" size="6">
						<div class="pvs4-full-select">
							<ion-select [(ngModel)]="lang"
										(ionChange)="changeLanguage()"
										okText="{{'okay' | translate}}"
										cancelText="{{'dismiss' | translate}}">
								<ion-select-option value="de">{{'Deutsch' }}</ion-select-option>
								<ion-select-option value="en">{{'English' }}</ion-select-option>
								<ion-select-option value="fr">{{'Français' }}</ion-select-option>
								<ion-select-option value="it">{{'Italiano' }}</ion-select-option>										
							</ion-select>								
						</div>
					</ion-col>
					<ion-col size-xl="5" size-lg="5" size-md="5" size-sm="6" size="6" style="text-align: -webkit-right;">
						<ion-button class="btn btn-danger" (click)="delLocalAll();">
							<span>{{'Lokale Daten löschen' | translate}}</span>
						</ion-button>
					</ion-col>
				</ion-row>
			</ion-grid>
			</div>
			<ion-grid>
				<ion-row>
					<ion-col size-lg="7" size="12">
						<div class="table-responsive">
							<div class="table-info">
								<div class="thead">
									<div class="tr table-header">
										<div class="th">{{'Meine Daten' | translate}}</div>
										<div class="th right_align">{{'Version' | translate}} {{apiService.version}}</div>										
									</div>
								</div>
								<div class="tbody">
									<div class="tr table-subheader table-subheader-fix">
										<div class="table-subheader-buttons">
											<ion-button size="small"
												(click)="open_mydataedit(userdata.profile, userdata.role, userdata.role_nr)">
												<ion-icon name="create"></ion-icon>
											</ion-button>
										</div>
									</div>
									<div class="tr table-body">
										<div class="td">{{'Name' | translate}}</div>
										<div class="td"><span>{{userdata.last_name}}</span></div>
									</div>
									<div class="tr table-body">
										<div class="td">{{'Vorname' | translate}}</div>
										<div class="td"><span>{{userdata.first_name}}</span></div>
									</div>
									<div class="tr table-body">
										<div class="td">{{'KennungMitarbeiter' | translate}}</div>
										<div class="td"><span>{{userdata.short_code}}</span></div>
									</div>
									<div class="tr table-body">
										<div class="td">{{'Farbe' | translate}}</div>
										<div class="td">
											<div [ngStyle]="{'width':'15px',
															'height':'15px',
															'margin-right':'5px',
															'display':'inline-block',
															'background-color':userdata.colour}">
											</div> <span>{{userdata.colour}}</span>
										</div>
									</div>
									<div class="tr table-body">
										<div class="td">{{'E-Mail' | translate}}</div>
										<div class="td"><span>{{userdata.email}}</span></div>
									</div>
									<div class="tr table-body">
										<div class="td">{{'Telefon' | translate}}</div>
										<div class="td"><span>{{userdata.phone}}</span></div>
									</div>
								</div>
								<div class="thead" style="margin-top: 10px;">
									<div class="tr table-header" style="border-radius: 0px">
										<div class="th">{{'Benutzerrechte' | translate}}</div>
									</div>
								</div>
								<div class="tbody">
									<div class="tr table-body" style="max-height: 50px;">
										<div class="td">{{'edit_customer' | translate}}</div>
										<div class="td">
											<ion-item lines="none" class="item-trns">
												<ion-toggle disabled [ngModel]="userdata.role_set.edit_customer">
												</ion-toggle>
											</ion-item>
										</div>
										<div class="td">{{'edit_membership' | translate}}</div>
										<div class="td">
											<ion-item lines="none" class="item-trns">
												<ion-toggle disabled [(ngModel)]="userdata.role_set.edit_membership">
												</ion-toggle>
											</ion-item>
										</div>
									</div>
									<div class="tr table-body" style="max-height: 50px;">
										<div class="td">{{'edit_rights' | translate}}</div>
										<div class="td">
											<ion-item lines="none" class="item-trns">
												<ion-toggle disabled [(ngModel)]="userdata.role_set.edit_rights">
												</ion-toggle>
											</ion-item>
										</div>
										<div class="td">{{'edit_contact_persons' | translate}}</div>
										<div class="td">
											<ion-item lines="none" class="item-trns">
												<ion-toggle disabled
													[(ngModel)]="userdata.role_set.edit_contact_persons">
												</ion-toggle>
											</ion-item>
										</div>
									</div>
									<div class="tr table-body" style="max-height: 50px;">
										<div class="td">{{'edit_products' | translate}}</div>
										<div class="td">
											<ion-item lines="none" class="item-trns">
												<ion-toggle disabled [(ngModel)]="userdata.role_set.edit_products">
												</ion-toggle>
											</ion-item>
										</div>
										<div class="td">{{'edit_product_templates' | translate}}</div>
										<div class="td">
											<ion-item lines="none" class="item-trns">
												<ion-toggle disabled [(ngModel)]="userdata.role_set.edit_product_templates">
												</ion-toggle>
											</ion-item>
										</div>
									</div>
									<div class="tr table-body" style="max-height: 50px;">
										<div class="td">{{'check_products' | translate}}</div>
										<div class="td">
											<ion-item lines="none" class="item-trns">
												<ion-toggle disabled [(ngModel)]="userdata.role_set.check_products">
												</ion-toggle>
											</ion-item>
										</div>
										<div class="td">{{'edit_protocol_templates' | translate}}</div>
										<div class="td">
											<ion-item lines="none" class="item-trns">
												<ion-toggle disabled [(ngModel)]="userdata.role_set.edit_protocol_templates">
												</ion-toggle>
											</ion-item>
										</div>
									</div>
								</div>
							</div>
						</div>
						<br>
						<ion-button (click)="imprintModal()" >{{ "Impressum" | translate }}</ion-button>
					</ion-col>
					<ion-col size-lg="5" size="12" *ngIf="(userdata.role==1)||(userdata.role==2)">
						<div class="table-responsive">
							<div class="table-info">
								<div class="tbody">
									<div class="tr table-subheader table-subheader-fix">
										<div class="table-subheader-buttons">
											<ion-button size="small"
														[disabled]="userdata.role_set.edit_membership==false"
														(click)="open_mydataedit(0,0,0,1)"
														[ngClass]="{'not-allowed': userdata.role_set.edit_membership==false}">
												<ion-icon name="add"></ion-icon>&nbsp;&nbsp;{{'Mitarbeiter' | translate}}												
											</ion-button>
										</div>
										<div class="search-search">
											<ion-input type="text"
														placeholder="{{'Suche' |translate }}"
														[(ngModel)]="filterValue"
														(input)="search_employee()"
														class="search-text-input-left">
											</ion-input>
										</div>
									</div>
									<div style="height: 587px; overflow: scroll; margin-bottom: -15px;">
									<div *ngFor="let coll of colleagues | orderBy:'Type':true">
										<div class="tr table-body" *ngIf="userdata.Type<20">
											<div class="td" style="max-width: 100%">
												<div (click)="open_mydataedit(coll.id,coll.role,coll.role_nr);"
													[ngClass]="{'not-allowed': userdata.role_set.edit_membership==false}"
													style="display: flex; align-items: center; cursor:pointer;">
													<div
														[ngStyle]="{'width':'15px', 'height':'15px', 'margin-right':'10px', 'display':'inline-block', 'background-color':coll.colour}">
														&nbsp;
													</div>
													{{coll.first_name}} {{coll.last_name}} ({{coll.short_code}})
												</div>
											</div>
										</div>
									</div>
									</div>
								</div>
							</div>
						</div>
					</ion-col>
				</ion-row>				
			</ion-grid>
		</div>
	</div>
</div>

<bottom-nav></bottom-nav>