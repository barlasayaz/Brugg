<main-nav aktivPage="ProductDetails" [idCustomer]="idCustomer"></main-nav>

<ion-content>
	<div class="ek-content">
		<div class="container">
			<div class="mt20 content-sm">
				<ion-grid>
					<ion-row>						
						<ion-col size-xl="7" size-lg="7" size-md="7" size-sm="12" size="12">
							<div class="kunden-wrap">
								<!-- Product Details -->
								<div class="kunden-col" style="padding-bottom: 12px;">
									<div class="table-info">
										<div class="thead">
											<div class="tr table-header">
												<div class="th">{{'Produkt Details' | translate}}</div>
											</div>
										</div>
										<div class="tbody">
											<div class="tr table-body">
												<div class="td">{{'Titel' | translate}}</div>
												<div class="td">{{activProduct.title}}</div>
											</div>
											<div class="tr table-body">
												<div class="td">DB-ID</div>
												<div class="td">{{activProduct.id}}</div>
											</div>
											<div class="tr table-body">
												<div class="td">#</div>
												<div class="td">{{activProduct.id_number}}</div>
											</div>
											<div class="tr table-body">
												<div class="td">{{'Articel No' | translate}}</div>
												<div class="td">{{activProduct.articel_no}}</div>
											</div>
											<div class="tr table-body">
												<div class="td">{{'Kundenbezeichnung' | translate}}</div>
												<div class="td">{{activProduct.customer_description}}</div>
											</div>
											<div class="tr table-body">
												<div class="td">{{'Autor' | translate}}</div>
												<div class="td">{{activProduct.author}}</div>
											</div>
											<div class="tr table-body">
												<div class="td ">{{'Intervall Prüfen' | translate}}</div>
												<div class="td">{{activProduct.check_interval}}</div>
											</div>
											<div class="tr table-body" *ngFor="let item of activProduct.items">
												<div class="td">{{item.title[lang]}}</div>
												<div *ngIf="item.type != 5" class="td">{{item.value}}</div>											
												<div *ngIf="item.type == 5" class="td">{{item.value | date : 'dd.MM.yyyy'}}
												</div>
											</div>
										</div>
									</div>
								</div>
								<!-- File Attachments -->
								<div class="table-responsive" style="padding-bottom: 12px;">
									<div class="table-info">
										<div class="thead">
											<div class="tr table-header">
												<div class="th">{{'Dateianhänge' | translate}}</div>
											</div>
										</div>
										<div class="tbody">
											<div class="tr table-subheader table-subheader-fix">
												<div class="table-subheader-buttons">  
													<div *ngIf="(userdata.role==1)||(userdata.role==2)">
														<ion-button small
																	(click)="getCamera()"
																	[disabled]="!mobilePlatform"
																	style="padding-right: 10px; margin-top: -32px;">
															<ion-icon name="camera"></ion-icon>
														</ion-button>
														<p-fileUpload #fubauto
																	mode="basic"
																	[auto]="true"
																	name="file" 
																	class="btn-primary"
																	url="{{url}}upload.php" 
																	(onUpload)="onUpload($event)"
																	(onBeforeUpload)="onBeforeUpload($event)"
																	method="POST"
																	accept="image/*,application/*,audio/*,message/*,text/*,video/*" 
																	maxFileSize="3000000"
																	chooseLabel="{{'Wähle Dateien' | translate}}">
														</p-fileUpload>
													</div>
												</div>	
											</div>
											<p *ngFor="let row of dateien">   
												<ion-icon name="trash" class="delSpan" (click)="delFile(row)"></ion-icon>         
												<a class="datei_link" href="{{link}}{{row}}" target="_blank"> &nbsp; {{row}}</a>
												<a *ngIf="KraftWegGraph && row=='KraftWegGraph.txt'" class="glyphicon glyphicon-signal delSpan" (click)="chart()"></a>
											</p> 
										</div>
										</div>
								</div>
							</div>
						</ion-col>						
						<ion-col size-xl="5" size-lg="5" size-md="5" size-sm="12" size="12">
							<!-- Product Image -->
							<div class="table-responsive" style="padding-bottom: 12px;">
								<div class="table-info">
									<div class="thead">
										<div class="tr table-header">
											<div class="th">{{'Produktbild' | translate}}</div>
										</div>
									</div>
									<div class="tbody1">
										<div class="whitebox-image">
											<img *ngIf="activProduct.images" src="{{activProduct.images}}?{{nocache}}">
										</div>
									</div>
								</div>
							</div>
							<!-- Product QR -->
							<div *ngIf="activProduct.qr_code" class="table-responsive" style="padding-bottom: 12px;">
								<div class="table-info">
									<div class="thead">
										<div class="tr table-header">
											<div class="th">{{'QR-Code' | translate}}</div>
										</div>
									</div>
									<div class="tbody">
										<div class="whitebox-image qrqr">
											<ngx-qrcode [qrc-value]="activProduct.qr_code" qrc-class="qrImage">
											</ngx-qrcode>
										</div>
									</div>
								</div>
							</div>
						</ion-col>
					</ion-row>
				</ion-grid>
			</div>
		</div>
	</div>
</ion-content>

<ion-fab slot="fixed" vertical="bottom" horizontal="end">
	<ion-fab-button color="tertiary">
		<ion-icon name="menu"></ion-icon>
	</ion-fab-button>
	<ion-fab-list side="top">
		<ion-fab-button color="primary"
						(click)="editProduct()"
						(mouseover)="mouseover(1)"
						(mouseout)="mouseout(1)"
						[class.mouse-over]="mouseoverButton1"
						[labelFab]="'Produkt bearbeiten'">
			<ion-icon name="create"></ion-icon>
		</ion-fab-button>		
		<ion-fab-button color="primary"
						(click)="copyProduct()"
						(mouseover)="mouseover(2)"
						(mouseout)="mouseout(2)"
						[class.mouse-over]="mouseoverButton2"
						[labelFab]="'Produkt duplizieren alt'">
			<ion-icon name="copy"></ion-icon>
		</ion-fab-button>		
		<ion-fab-button color="primary"
						(click)="createProtocol()"
						[disabled]="userdata.role_set.check_products==false"
						(mouseover)="mouseover(3)"
						(mouseout)="mouseout(3)"
						[class.mouse-over]="mouseoverButton3"
						[labelFab]="'Neues Protokoll'">
			<ion-icon name="clipboard"></ion-icon>
		</ion-fab-button>
		<ion-fab-button color="primary"
						(click)="printPdf()"
						(mouseover)="mouseover(4)"
						(mouseout)="mouseout(4)"
						[class.mouse-over]="mouseoverButton4"
						[labelFab]="'PDF Ansicht'">
			<ion-icon name="document"></ion-icon>
		</ion-fab-button>
		<ion-fab-button color="primary"						
						(click)="nfc_scan()"
						[disabled]="!mobilePlatform"
						(mouseover)="mouseover(5)"
						(mouseout)="mouseout(5)"
						[class.mouse-over]="mouseoverButton5"
						[labelFab]="'NFC Scan'">
			<ion-icon name="wifi"></ion-icon>
		</ion-fab-button>
		<ion-fab-button color="primary"
						(click)="qr_code()"
						(mouseover)="mouseover(6)"
						(mouseout)="mouseout(6)"
						[class.mouse-over]="mouseoverButton6"
						[labelFab]="'QR-Code scannen'">
			<ion-icon name="qr-scanner"></ion-icon>
		</ion-fab-button>
	</ion-fab-list>
</ion-fab>