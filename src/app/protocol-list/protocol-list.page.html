<main-nav aktivPage="ProtocolList" [idCustomer]="idCustomer" [company]="company"></main-nav>

<div class="ek-content"> 
    <p-menubar [model]="popupMenu" [autoDisplay]="false" id="menuMin"> 
        <div class="ui-inputgroup search-search">
            <input type="text" 
                   pInputText 
                   placeholder="{{'Suche' |translate }}" 
                   [(ngModel)]="columnFilterValues['search_all']" 
                   (input)="search_all()">   
            <button (click)="search_all()" 
                    pButton type="button" 
                    icon="fa fa-search" 
                    class="ui-button-warn">
            </button>      
        </div>   
    </p-menubar>
    <p-menubar [model]="menuItems" [autoDisplay]="false" id="menuMax"> 
        <div class="ui-inputgroup search-search">
            <input type="text" 
                   pInputText 
                   placeholder="{{'Suche' |translate }}" 
                   [(ngModel)]="columnFilterValues['search_all']" 
                   (input)="search_all()">   
            <!-- <button (click)="search_all()" 
                    pButton type="button" 
                    icon="fa fa-search" 
                    class="ui-button-warn">
            </button>       -->
        </div>   
    </p-menubar>
    <p-treeTable [value]="protocolListView" 
                 [columns]="cols" 
                 selectionMode="single" 
                 [(selection)]="selectedNode" 
                 (onNodeSelect)="nodeSelect($event)" 
                 (onNodeUnselect)="nodeUnselect()" 
                 dataKey="id"
                 [scrollable]="true"
                 scrollHeight="80vh"
                 [resizableColumns]="true">
                 <ng-template pTemplate="colgroup" let-columns>
                    <colgroup>
                        <col *ngFor="let col of selectedColumns" style="width:200px">
                    </colgroup>
                </ng-template>
                 <ng-template pTemplate="header" let-columns>
                    <tr>
                       <th *ngFor="let col of selectedColumns" ttResizableColumn [ttSortableColumn]="col.field">
                           {{col.header}}
                           <p-treeTableSortIcon [field]="col.field"></p-treeTableSortIcon>
                       </th>
                    </tr>
                    <tr [hidden]="!splitFilter" >
                       <th *ngFor="let col of selectedColumns" [ngSwitch]="col.field" class="p-table-filter"> 
                           <input pInputText type="text" class="filter-search"
                                  (input)="search_all()" 
                                  [(ngModel)]="columnFilterValues[col.field]">
                       </th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-rowNode let-rowData="rowData" let-columns="columns">
                    <tr [ttSelectableRow]="rowNode" >
                       <td *ngFor="let col of selectedColumns; let i = index">
                           <p-treeTableToggler [rowNode]="rowNode" *ngIf="i == 0"></p-treeTableToggler>
                           <label *ngIf="(col.field == 'protocol_date') || (col.field == 'protocol_date_next')">{{rowData[col.field] | date : 'dd.MM.yyyy'}}</label>
                           <label *ngIf="(col.field != 'protocol_date') && (col.field != 'protocol_date_next')">{{rowData[col.field]}}</label>       
                                               
                       </td>
                    </tr>
                </ng-template>
    </p-treeTable>
</div>